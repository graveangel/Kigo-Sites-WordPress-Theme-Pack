function debounce(e,t,i){var r;return function(){var n=this,o=arguments,s=function(){r=null,i||e.apply(n,o)},a=i&&!r;clearTimeout(r),r=setTimeout(s,t),a&&e.apply(n,o)}}function getClassnameForCode(e){return 0>e||e>47?"wi-na":codeToClassname[e]}var app={debug:!0,modules:{widgets:{},templates:{}},bapiModules:{widgets:{},templates:{}},init:function(){this.initModules(this.modules),this.fixedHeader(),this.kdMove()},initBapi:function(){this.initModules(this.bapiModules)},initModules:function(e){for(var t in e)"function"==typeof e[t].init&&"function"==typeof e[t].cond?e[t].cond()&&(app.log("Initializing module",t,e[t]),e[t].init()):this.initModules(e[t])},initSwiper:function(e,t){return new Swiper(e,t)},fixedHeader:function(){function e(){var e=window.scrollY,t=document.querySelector(".header-background"),i=document.querySelector(".header-background .header"),r=i.clientHeight;e>=r?t.classList.add("fixed"):t.classList.remove("fixed")}e(),window.addEventListener("scroll",debounce(e,25))},exists:function(e){var t=document.querySelector(e);return!!t},isMobile:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)},log:function(){this.debug&&console.log.apply(console,arguments)},bapiRender:function(e,t,i,r){var n={};BAPI.search(e,n,function(n){BAPI.get(n.result,e,{},function(e){var n={};n.result=e.result,n.config=BAPI.config();var o="object"==typeof r?Object.assign(n,r):n,s=Mustache.render(BAPI.UI.mustacheHelpers.getPartials(t),o);i(s)})})},kdMove:function(){for(var e=document.querySelectorAll("[data-move]"),t=0;t<e.length;t++){var i=e[t],r=document.querySelector(i.dataset.move);r.appendChild(e[t]),i.classList.add("hasMoved")}}};window.addEventListener("load",app.init.bind(app)),window.addEventListener("DOMContentLoaded",app.initBapi.bind(app)),function(e){function t(e){y.push(e),b||(b=!0,m(r))}function i(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function r(){b=!1;var e=y;y=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var i=e.takeRecords();n(e),i.length&&(e.callback_(i,e),t=!0)}),t&&r()}function n(e){e.nodes_.forEach(function(t){var i=g.get(t);i&&i.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function o(e,t){for(var i=e;i;i=i.parentNode){var r=g.get(i);if(r)for(var n=0;n<r.length;n++){var o=r[n],s=o.options;if(i===e||s.subtree){var a=t(s);a&&o.enqueue(a)}}}}function s(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++S}function a(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new a(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function l(e,t){return k=new a(e,t)}function d(e){return M?M:(M=c(k),M.oldValue=e,M)}function u(){k=M=void 0}function p(e){return e===M||e===k}function h(e,t){return e===t?e:M&&p(e)?M:null}function f(e,t,i){this.observer=e,this.target=t,this.options=i,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,g=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],w=String(Math.random());window.addEventListener("message",function(e){if(e.data===w){var t=v;v=[],t.forEach(function(e){e()})}}),m=function(e){v.push(e),window.postMessage(w,"*")}}var b=!1,y=[],S=0;s.prototype={observe:function(e,t){if(e=i(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=g.get(e);r||g.set(e,r=[]);for(var n,o=0;o<r.length;o++)if(r[o].observer===this){n=r[o],n.removeListeners(),n.options=t;break}n||(n=new f(this,e,t),r.push(n),this.nodes_.push(e)),n.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=g.get(e),i=0;i<t.length;i++){var r=t[i];if(r.observer===this){r.removeListeners(),t.splice(i,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var k,M;f.prototype={enqueue:function(e){var i=this.observer.records_,r=i.length;if(i.length>0){var n=i[r-1],o=h(n,e);if(o)return void(i[r-1]=o)}else t(this.observer);i[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=g.get(e);t||g.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=g.get(e),i=0;i<t.length;i++)if(t[i]===this){t.splice(i,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,i=e.relatedNode.namespaceURI,r=e.target,n=new l("attributes",r);n.attributeName=t,n.attributeNamespace=i;var s=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;o(r,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(i)?void 0:e.attributeOldValue?d(s):n});break;case"DOMCharacterDataModified":var r=e.target,n=l("characterData",r),s=e.prevValue;o(r,function(e){return e.characterData?e.characterDataOldValue?d(s):n:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var a,c,p=e.target;"DOMNodeInserted"===e.type?(a=[p],c=[]):(a=[],c=[p]);var h=p.previousSibling,f=p.nextSibling,n=l("childList",e.target.parentNode);n.addedNodes=a,n.removedNodes=c,n.previousSibling=h,n.nextSibling=f,o(e.relatedNode,function(e){return e.childList?n:void 0})}u()}},e.JsMutationObserver=s,e.MutationObserver||(e.MutationObserver=s,s._isPolyfilled=!0)}}(self);var codeToClassname=["wi-tornado","wi-day-thunderstorm","wi-hurricane","wi-thunderstorm","wi-storm-showers","wi-rain-mix","wi-rain-mix","wi-rain-mix","wi-rain-mix","wi-snow","wi-rain-mix","wi-showers","wi-showers","wi-snow","wi-snow","wi-rain-mix","wi-snow","wi-rain-mix","wi-hail","wi-fog","wi-fog","wi-fog","wi-fog","wi-fog","wi-cloudy-gusts","wi-cloudy-gusts","wi-cloudy","wi-night-cloudy","wi-day-cloudy","wi-night-partly-cloudy","wi-day-cloudy","wi-night-clear","wi-day-sunny","wi-night-clear","wi-day-sunny","wi-rain-mix","wi-hot","wi-storm-showers","wi-storm-showers","wi-storm-showers","wi-showers","wi-snow","wi-showers","wi-rain-mix","wi-cloudy","wi-storm-showers","wi-hail","wi-storm-showers"];app.modules.templates.propertyDetails={forceusemap:!1,mobileBreak:768,init:function(){this.cond()&&this.fixHeroImage().openCloseAmenitiesList().lightBoxAndCarousel().imageHover().popUpBookingForm().checkPropSettings().checkThumbs().checkUseMap()},lightBoxAndCarousel:function(){var e=jQuery(".ppt-slides a").simpleLightbox();jQuery(document).on("click",".more,.open-lightbox, .ppt-slides a",function(t){if(t.preventDefault(),"undefined"!=typeof jQuery(this).attr("data-index")){var i=jQuery(this).attr("data-index");e.open(jQuery(jQuery('.ppt-slides a[data-index="'+i+'"]')))}else e.open(jQuery(jQuery(".ppt-slides a")[0]))});var t=this;return jQuery(window).width()<=t.mobileBreak&&t.swiperCarousel(),this},imageHover:function(){return jQuery(".simple-lightbox").hover(function(){jQuery("#ppt-image-caption").text(jQuery(this).attr("title"))}),this},swiperCarousel:function(){return"undefined"!=typeof SWCarousel&&SWCarousel||(jQuery(".ppt-slides").addClass("swiper-wrapper"),jQuery(".ppt-slides > li").addClass("swiper-slide"),SWCarousel=new Swiper(".ppt-images",{centeredSlides:!0,spaceBetween:0,nextButton:".next-slide",prevButton:".prev-slide"})),this},openCloseAmenitiesList:function(){return jQuery(document).on("click",".template-property .open-close",function(e){jQuery(this).parent().toggleClass("active")}),this},fixHeroImage:function(){if(app.exists(".hero-image")&&!app.isMobile()){var e=jQuery(".hero-image"),t=e.height(),i=e.parent(),r=i.height();if(t>r){var n=Math.round((t-r)/2);e.css("bottom","-"+n+"px")}}return this},popUpBookingForm:function(){return jQuery(document).on("click",".pop-up-form-link",function(e){e.preventDefault(),jQuery(".pop-up-booking-form").addClass("active")}),jQuery(document).on("click",".booking-form",function(e){e.stopPropagation()}),jQuery(document).on("click",".booking-form .close, .pop-up-booking-form.active",function(e){e.preventDefault(),jQuery(".pop-up-booking-form").removeClass("active")}),this},checkUseMap:function(){function e(){var e={path:"M-0.5-41C-7.9-41-14-34.9-14-27.5c0,3,1.9,7.9,5.9,15c2.8,5,5.5,9.2,5.6,9.3l2,3l2-3c0.1-0.2,2.9-4.3,5.6-9.3c3.9-7.1,5.9-12,5.9-15C13-34.9,7-41-0.5-41z M-0.5-20.6c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S3.4-20.6-0.5-20.6z",fillColor:d,fillOpacity:1,strokeColor:"rgba(0,0,0,.25)",strokeWeight:1};new google.maps.Marker({position:new google.maps.LatLng(n,o),map:l,iw:!1,icon:e})}function t(){var e=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:{lat:parseFloat(n),lng:parseFloat(o)},pov:{heading:34,pitch:10}});l.setStreetView(e)}function i(){jQuery(c).css("width","50%");var e=l.getCenter();google.maps.event.trigger(l,"resize"),l.setCenter(e),jQuery("#pano").css("width","50%").css("left","50%")}var r=parseInt(jQuery(".bapi-entityadvisor").attr("data-pkid")),n=jQuery(".bapi-entityadvisor").attr("data-lat"),o=jQuery(".bapi-entityadvisor").attr("data-long"),s=selected_usemap,a=!1;s.forEach(function(e){e===r&&(a=!0)}),/comingsoon\.gif/.test(jQuery(".bapi-entityadvisor").attr("data-bg"))&&(a=!0),this.forceusemap&&(a=!0);var c=document.querySelector(".hero-image");if(a){var l=new google.maps.Map(c,{center:{lat:parseFloat(n),lng:parseFloat(o)},scrollwheel:!1,zoom:18}),d=document.querySelector(".template-property[data-markercolor]").dataset.markercolor;switch(selected_usemap_layout){case 0:e(),jQuery(c).css("width","100%"),jQuery("#pano").hide();break;case 1:e(),t(),i();break;case 2:t(),jQuery(c).hide;break;default:e(),t(),i()}}else{var u=jQuery(".bapi-entityadvisor").attr("data-bg");jQuery(c).css("background-image",'url("'+u+'")')}return this},checkThumbs:function(){return/comingsoon\.gif/.test($(".simple-lightbox").attr("href"))?/comingsoon\.gif/.test(jQuery(".bapi-entityadvisor").attr("data-bg"))?($(".ppt-images").hide(),$(".ppt-desc").css("width","100%")):($(".ppt-images").show(),$(".simple-lightbox").attr("href",jQuery(".bapi-entityadvisor").attr("data-bg")),$(".thumb-img").attr("src",jQuery(".bapi-entityadvisor").attr("data-bg"))):($(".ppt-images").show(),1===$(".thumb-img").length&&($(".hero-image").css("background","transparent"),this.forceusemap=!0,$(".more").hide(),$(".ppt-slides li:first-child").css("width","100%"))),this},checkPropSettings:function(){return force_usemap&&(this.forceusemap=!0),forced_featured&&(this.forcedfeatured=!0),usemap_layout>=0&&force_usemap&&(selected_usemap_layout=usemap_layout),this},cond:function(){return app.exists(".page-template-property-detail")}},app.modules.templates.searchPage={templateSelector:"body.page-template-search-page",mapSelector:"#mapContainer",propertiesContainerSelector:"#propertiesContainer",propertySelector:"",mapObj:null,markers:[],bounds:null,openMarkers:[],init:function(){this.mapObj=this.initMap(),this.initMarkers(),this.mapResetEvents(),this.viewEvents()},cond:function(){return document.querySelectorAll(this.templateSelector).length>0},initMap:function(){return new google.maps.Map(document.querySelector(this.mapSelector),{center:{lat:-34.397,lng:150.644},zoom:8})},mapResetEvents:function(){var e=document.querySelector("#resetMap");e.addEventListener("click",this.centerMap.bind(this))},initMarkers:function(){var e=null,t=document.querySelector(this.propertiesContainerSelector);if(t.children.length>0)e=this.getProperties(),this.propsToMarkers(e),this.centerMap();else{var i=new MutationObserver(function(t){e=this.getProperties(),this.propsToMarkers(e),this.centerMap(),i.disconnect()}.bind(this));i.observe(t,{childList:!0})}},getProperties:function(){return document.querySelectorAll(this.propertiesContainerSelector+" .property")},propsToMarkers:function(e){for(var t=0;t<e.length;t++){var i=e[t],r=this.mapObj,n=JSON.parse(i.dataset.marker),o=n.coord,s=i.querySelector(".prop-map-location"),a=new google.maps.InfoWindow({content:s.querySelector(".info-html").outerHTML}),c=document.querySelector(this.mapSelector).dataset.markercolor,l={path:"M-0.5-41C-7.9-41-14-34.9-14-27.5c0,3,1.9,7.9,5.9,15c2.8,5,5.5,9.2,5.6,9.3l2,3l2-3c0.1-0.2,2.9-4.3,5.6-9.3c3.9-7.1,5.9-12,5.9-15C13-34.9,7-41-0.5-41z M-0.5-20.6c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S3.4-20.6-0.5-20.6z",fillColor:c,fillOpacity:1,strokeColor:"rgba(0,0,0,.25)",strokeWeight:1},d=new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lng),map:this.mapObj,iw:a,icon:l});i.marker=d,d.addListener("click",function(e){this.openMarkers.map(function(e){e.iw.close()}),e.iw.open(r,e),this.openMarkers.push(e)}.bind(this,d)),i.querySelector(".viewInMap").addEventListener("click",function(e){this.openMarkers.map(function(e){e.iw.close()}),e.marker.iw.open(r,e.marker),this.openMarkers.push(e.marker)}.bind(this,i)),this.markers.push(d)}},centerMap:function(){if(null==this.bounds){var e=new google.maps.LatLngBounds,t=this.markers;for(index in t){var i=t[index];e.extend(new google.maps.LatLng(i.position.lat(),i.position.lng()))}this.bounds=e,this.mapObj.fitBounds(this.bounds)}else this.mapObj.fitBounds(this.bounds)},viewEvents:function(){var e=document.querySelector(".split-search"),t=document.querySelector(".propContainer"),i="tmpl-propertysearch-listview",r="tmpl-propertysearch-mapview";t.addEventListener("click",function(t){console.log(t.target),t.target.dataset.template==i?e.classList.add("listView"):t.target.dataset.template==r&&e.classList.remove("listView")})}},app.bapiModules.widgets.buckets={selector:".kd-buckets",init:function(){$(this.selector).each(function(e,t){app.bapiRender("searches","tmpl-searches-quickview",function(e){t.innerHTML=e},{"class":t.dataset["class"]})})},cond:function(){return app.exists(this.selector)}},app.modules.widgets.featured={selector:".kd-featured",sliderSelector:".swiper-container",observedSelector:".swiper-wrapper",init:function(){var e=document.querySelectorAll(this.selector);$.each(e,function(e,t){var i=t.querySelector(this.observedSelector);if(i.children.length>0)this.initSlider(e,t);else{var r=new MutationObserver(function(i){this.initSlider(e,t),r.disconnect()}.bind(this));r.observe(i,{childList:!0})}}.bind(this))},cond:function(){return app.exists(this.selector)},getSliderConfig:function(e){return{autoplay:!1,loop:!0,paginationClickable:!0,pagination:e.querySelector(".swiper-pagination"),nextButton:e.querySelector(".next"),prevButton:e.querySelector(".prev"),bulletActiveClass:"secondary-fill-color",simulateTouch:!1}},initSlider:function(e,t){var i=t.querySelector(this.sliderSelector);app.initSwiper(i,this.getSliderConfig(t))}},app.modules.widgets.hero={selector:".kd-hero",sliderSelector:".swiper-container",init:function(){var e=document.querySelectorAll(this.selector);$.each(e,this.initSlider.bind(this))},cond:function(){return app.exists(this.selector)},getSliderConfig:function(e){var t=e.querySelector(this.sliderSelector).dataset,i={autoplay:t.speed||!1,loop:"on"==t.loop,nextButton:e.querySelector(".next"),prevButton:e.querySelector(".prev"),effect:t.effect||"slide",speed:500,freeMode:"on"==t.freemode,direction:t.direction||"horizontal",pagination:"on"==t.pagination?e.querySelector(".swiper-pagination"):!1,paginationClickable:!0,bulletActiveClass:"active",centeredSlides:"on"==t.centered_slides,slidesPerView:t.slides_per_view||1};return i},initSlider:function(e,t){var i=this.getSliderConfig(t);app.initSwiper(t.querySelector(this.sliderSelector),i)}},app.modules.widgets.items={selector:".kd-items",init:function(){this.toggleEvents(),this.initSliders()},toggleEvents:function(){var e=document.querySelectorAll(".item-block .open-close");$.each(e,function(e,t){t.addEventListener("click",function(e){this.parentElement.classList.toggle("active")})})},initSliders:function(){for(var e=document.querySelectorAll(this.selector+" .swiper-container"),t=0;t<e.length;t++){var i=e[t];new Swiper(i,{spaceBetween:15,nextButton:".next-slide",prevButton:".prev-slide",slidesPerView:i.dataset.columns||5,loop:!0,loopAdditionalSlides:5,breakpoints:{992:{slidesPerView:3},780:{centeredSlides:!0,slidesPerView:2},480:{centeredSlides:!0,slidesPerView:1}}})}},cond:function(){return app.exists(".kd-items")}},app.modules.widgets.menu={selector:".kd-menu",init:function(){for(var e=document.querySelectorAll(this.selector),t=0;t<e.length;t++)this.bindEvents(e.item(t))},cond:function(){return app.exists(this.selector)},bindEvents:function(e){var t=e.querySelector(".toggle");t.addEventListener("click",this.toggleMenu.bind(e))},toggleMenu:function(){this.classList.toggle("active")}},app.bapiModules.widgets.search={selector:".kd-search",init:function(){$(this.selector).each(function(e,t){t.querySelector(".search-button-block .more").addEventListener("click",function(e){t.classList.toggle("open"),this.classList.toggle("active")})})},cond:function(){return app.exists(this.selector)}},app.bapiModules.widgets.specials={selector:".kd-specials",init:function(){$(this.selector).each(function(e,t){app.bapiRender("specials","tmpl-specials-quickview",function(e){t.innerHTML=e},{"class":t.dataset["class"]})})},cond:function(){return app.exists(this.selector)}},app.modules.widgets.team={mobileBreak:991,selector:".kd-team",init:function(){for(var e=document.querySelectorAll(this.selector+".swiper-container"),t=0;t<e.length;t++){var i=e[t];new Swiper(i,{spaceBetween:15,nextButton:".next-slide",prevButton:".prev-slide",slidesPerView:i.dataset.columns||5,loop:!0,loopAdditionalSlides:5,simulateTouch:!1,breakpoints:{992:{slidesPerView:3},780:{centeredSlides:!0,slidesPerView:2},480:{centeredSlides:!0,slidesPerView:1}},onInit:function(){i.classList.remove("faded-out")}})}},cond:function(){return app.exists(".kd-team")}};